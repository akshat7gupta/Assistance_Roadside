{"ast":null,"code":"var _jsxFileName = \"T:\\\\JivaRecovery-master\\\\client\\\\src\\\\components\\\\modals\\\\edit-user-modal.jsx\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./edit-user-modal.scss\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport userService from \"../../services/user-service\";\nimport { AuthContext } from \"../../ContextWrapper\";\n\nconst EditUserModal = ({\n  updateProfile,\n  user,\n  updateUser\n}) => {\n  const {\n    auth\n  } = useContext(AuthContext);\n  const [name, setName] = useState((user === null || user === void 0 ? void 0 : user.name) || \"\");\n  const [email, setEmail] = useState((user === null || user === void 0 ? void 0 : user.email) || \"\");\n  const [password, setPassword] = useState((user === null || user === void 0 ? void 0 : user.password) || \"\");\n  const [phone, setPhone] = useState((user === null || user === void 0 ? void 0 : user.phone) || \"\");\n  const [show, setShow] = useState(false);\n\n  const handleShow = () => {\n    setShow(true);\n  };\n\n  const handleClose = () => setShow(false);\n\n  const handleDelete = () => {\n    setShow(false);\n    userService.delete(auth);\n  };\n\n  const handleSave = async () => {\n    setShow(false);\n    const updatedUser = {\n      name,\n      email,\n      password,\n      phone\n    };\n\n    if (!user) {\n      const userProfile = await userService.edit(auth, updatedUser);\n      updateProfile({\n        name: userProfile.name,\n        email: userProfile.email,\n        phone: userProfile.phone\n      });\n    } else {\n      const userProfile = await userService.edit(user[\"_id\"], updatedUser);\n      updateUser(user[\"_id\"], userProfile);\n    }\n  };\n\n  useEffect(() => {\n    console.log(user, \"HAHAAH\");\n\n    if (!user) {\n      userService.getUser(auth).then(data => {\n        setName(data.name);\n        setEmail(data.email);\n        setPassword(data.password);\n        setPhone(data.phone);\n      });\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button button-primary request-btn\",\n    onClick: handleShow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u0430\\u0439\"), /*#__PURE__*/React.createElement(Modal, {\n    show: show,\n    onHide: handleClose,\n    className: \"edit-user-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u0430\\u043D\\u0435\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-form edit-user-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    value: name,\n    onChange: e => setName(e.target.value),\n    placeholder: \"\\u0418\\u043C\\u0435\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"\\u0418\\u043C\\u0435\\u0439\\u043B\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u0430\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    name: \"phone\",\n    value: phone,\n    onChange: e => setPhone(e.target.value),\n    placeholder: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }))))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button button-danger\",\n    onClick: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, \"\\u0418\\u0437\\u0442\\u0440\\u0438\\u0432\\u0430\\u043D\\u0435\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button button-primary\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, \"\\u0417\\u0430\\u0442\\u0432\\u043E\\u0440\\u0438\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button button-success\",\n    onClick: handleSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, \"\\u0417\\u0430\\u043F\\u0430\\u0437\\u0438\"))));\n};\n\nexport default EditUserModal;","map":{"version":3,"sources":["T:/JivaRecovery-master/client/src/components/modals/edit-user-modal.jsx"],"names":["React","useContext","useState","useEffect","Modal","userService","AuthContext","EditUserModal","updateProfile","user","updateUser","auth","name","setName","email","setEmail","password","setPassword","phone","setPhone","show","setShow","handleShow","handleClose","handleDelete","delete","handleSave","updatedUser","userProfile","edit","console","log","getUser","then","data","e","target","value"],"mappings":"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","sourcesContent":["import \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./edit-user-modal.scss\";\n\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport userService from \"../../services/user-service\";\nimport { AuthContext } from \"../../ContextWrapper\";\n\nconst EditUserModal = ({ updateProfile, user, updateUser }) => {\n  const { auth } = useContext(AuthContext);\n  const [name, setName] = useState(user?.name || \"\");\n  const [email, setEmail] = useState(user?.email || \"\");\n  const [password, setPassword] = useState(user?.password || \"\");\n  const [phone, setPhone] = useState(user?.phone || \"\");\n\n  const [show, setShow] = useState(false);\n  const handleShow = () => {\n    setShow(true);\n  };\n  const handleClose = () => setShow(false);\n  const handleDelete = () => {\n    setShow(false);\n    userService.delete(auth);\n  };\n  const handleSave = async () => {\n\n    setShow(false);\n    const updatedUser = {\n      name,\n      email,\n      password,\n      phone,\n    };\n\n    if (!user) {\n      const userProfile = await userService.edit(auth, updatedUser);\n\n      updateProfile({\n        name: userProfile.name,\n        email: userProfile.email,\n        phone: userProfile.phone,\n      });\n    } else {\n      const userProfile = await userService.edit(user[\"_id\"], updatedUser);\n\n      updateUser(user[\"_id\"], userProfile);\n    }\n  };\n\n  useEffect(() => {\n    console.log(user,\"HAHAAH\")\n    if (!user) {\n      userService.getUser(auth).then((data) => {\n        setName(data.name);\n        setEmail(data.email);\n        setPassword(data.password);\n        setPhone(data.phone);\n      });\n    }\n  }, []);\n\n  return (\n    <>\n      <button\n        className=\"button button-primary request-btn\"\n        onClick={handleShow}\n      >\n        Редактирай\n      </button>\n      <Modal show={show} onHide={handleClose} className=\"edit-user-modal\">\n        <Modal.Header closeButton>\n          <Modal.Title>Редактиране</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div className=\"user-form edit-user-form\">\n            <form>\n              <label>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                  placeholder=\"Име\"\n                />\n              </label>\n              <label>\n                <input\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  type=\"email\"\n                  name=\"email\"\n                  placeholder=\"Имейл\"\n                />\n              </label>\n              <label>\n                <input\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  type=\"password\"\n                  name=\"password\"\n                  placeholder=\"Парола\"\n                />\n              </label>\n              <label>\n                <input\n                  type=\"number\"\n                  name=\"phone\"\n                  value={phone}\n                  onChange={(e) => setPhone(e.target.value)}\n                  placeholder=\"Телефон\"\n                />\n              </label>\n            </form>\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          <button className=\"button button-danger\" onClick={handleDelete}>\n            Изтриване\n          </button>\n          <button className=\"button button-primary\" onClick={handleClose}>\n            Затвори\n          </button>\n          <button className=\"button button-success\" onClick={handleSave}>\n            Запази\n          </button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n\nexport default EditUserModal;\n"]},"metadata":{},"sourceType":"module"}